/* Markdown Content Styles */
/* Using unified CSS variables for consistent UI design */

.vc-markdown {
    line-height: 1.65;
    color: var(--vscode-foreground);
    font-size: var(--vc-font-size, 12px);
    
    // Headings with proper hierarchy
    h1, h2, h3, h4, h5, h6 {
        margin-top: 1em;
        margin-bottom: 0.5em;
        font-weight: 600;
        line-height: 1.3;
        color: var(--vc-color-text-heading, var(--vscode-foreground));
    }
    
    h1 { font-size: 1.5em; }
    h2 { font-size: 1.3em; }
    h3 { font-size: 1.15em; }
    h4 { font-size: 1.05em; }
    
    // Paragraphs
    p {
        margin: 0.6em 0;
        
        &:first-child { margin-top: 0; }
        &:last-child { margin-bottom: 0; }
    }
    
    // Lists enhancement
    ul, ol {
        margin: 0.5em 0;
        padding-left: 1.4em;
        
        li {
            margin: 0.3em 0;
            padding-left: 0.3em;
            
            &::marker {
                color: var(--vc-color-text-tertiary);
            }
        }
    }
    
    // Blockquotes enhancement
    blockquote {
        position: relative;
        margin: 0.8em 0;
        padding: 10px 14px 10px 16px;
        background: var(--vcoder-surface-3);
        border-radius: 0 8px 8px 0;
        border-left: 3px solid var(--vscode-textLink-foreground);
        color: var(--vc-color-text-secondary);
        font-style: italic;
        
        // Subtle gradient
        &::before {
            content: '';
            position: absolute;
            top: 0;
            left: 3px;
            bottom: 0;
            width: 60px;
            background: linear-gradient(
                90deg,
                color-mix(in srgb, var(--vscode-textLink-foreground) 8%, transparent),
                transparent
            );
            pointer-events: none;
        }
        
        p {
            margin: 0;
        }
    }
    
    // Links
    a {
        color: var(--vscode-textLink-foreground);
        text-decoration: none;
        
        &:hover {
            text-decoration: underline;
            color: var(--vscode-textLink-activeForeground);
        }
    }
    
    // Tables with consistent styling
    table {
        width: 100%;
        margin: 0.8em 0;
        border-collapse: separate;
        border-spacing: 0;
        border: 1px solid var(--vcoder-border);
        border-radius: 8px;
        overflow: hidden;
        
        th, td {
            padding: 10px 14px;
            text-align: left;
            border-bottom: 1px solid var(--vcoder-border-light);
            
            &:not(:last-child) {
                border-right: 1px solid var(--vcoder-border-light);
            }
        }
        
        th {
            background: var(--vcoder-surface-3);
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            color: var(--vc-color-text-secondary);
        }
        
        tbody tr {
            background: var(--vcoder-surface-2);
            transition: background 0.15s;
            
            &:hover {
                background: var(--vc-control-item-bg-hover);
            }
            
            &:last-child td {
                border-bottom: none;
            }
        }
    }
    
    // Horizontal rule
    hr {
        border: none;
        border-top: 1px solid var(--vcoder-border, var(--vscode-panel-border));
        margin: 1.5em 0;
    }
    
    // Strong and emphasis
    strong {
        font-weight: 600;
        color: var(--vc-color-text-heading, var(--vscode-foreground));
    }
    
    em {
        font-style: italic;
    }
}

// ========== Inline code enhancement ==========
.inline-code {
    font-family: var(--vc-font-family-code, var(--vscode-editor-font-family, monospace));
    font-size: 0.9em;
    background: var(--vcoder-surface-3, var(--vscode-textCodeBlock-background));
    padding: 2px 6px;
    border-radius: 4px;
    border: 1px solid var(--vcoder-border-light, transparent);
    color: var(--vscode-textPreformat-foreground, var(--vc-color-text));
    
    // Subtle highlight effect
    box-shadow: inset 0 -1px 0 var(--vcoder-border-light);
    
    // Clickable file path style
    &.file-path {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        transition: all 0.15s;
        
        svg {
            width: 12px;
            height: 12px;
            flex-shrink: 0;
            opacity: 0.7;
        }
        
        &.is-file {
            cursor: pointer;
            color: var(--vscode-textLink-foreground);
            
            &:hover {
                background: var(--vscode-list-hoverBackground);
                border-color: var(--vscode-textLink-foreground);
                color: var(--vscode-textLink-activeForeground);
                
                svg {
                    opacity: 1;
                }
                
                span {
                    text-decoration: underline;
                }
            }
        }
        
        &.is-directory {
            color: var(--vscode-terminal-ansiYellow);
            
            svg {
                color: var(--vscode-terminal-ansiYellow);
            }
        }
    }
}

// ========== Path block (for code blocks that are just paths) ==========
.vc-path-block {
    margin: 0.5em 0;
    
    .file-path {
        display: flex;
        padding: 8px 12px;
        font-size: 12px;
    }
}

// ========== Code block enhancement ==========
.vc-code-block {
    margin: 0.8em 0;
    border-radius: 8px;
    overflow: hidden;
    background: var(--vcoder-surface-2);
    border: 1px solid var(--vcoder-border);
    
    // Hover effect
    transition: border-color 0.2s, box-shadow 0.2s;
    
    &:hover {
        border-color: color-mix(in srgb, var(--vscode-textLink-foreground) 40%, var(--vcoder-border));
        box-shadow: 0 2px 8px color-mix(in srgb, var(--vscode-textLink-foreground) 10%, transparent);
    }
}

.code-block-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 10px;
    background: var(--vcoder-surface-3);
    border-bottom: 1px solid var(--vcoder-border);
}

.code-language-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    
    .language-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: var(--vscode-textLink-foreground);
    }
    
    .language-name {
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        color: var(--vc-color-text-secondary);
    }
}

.code-block-actions {
    display: flex;
    gap: 2px;
}

.code-action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: var(--vc-color-text-tertiary);
    cursor: pointer;
    transition: all 0.15s;
    
    svg {
        width: 14px;
        height: 14px;
    }
    
    &:hover {
        background: var(--vc-control-item-bg-hover);
        color: var(--vc-color-text);
    }
    
    &.is-success {
        color: var(--vcoder-status-success);
    }
}

// Simple code block (for streaming)
.code-block-simple {
    margin: 0;
    padding: 10px 12px;
    background: transparent;
    overflow-x: auto;
    
    code {
        font-family: var(--vc-font-family-code, var(--vscode-editor-font-family, monospace));
        font-size: var(--vc-font-size-code, 13px);
        line-height: var(--vc-line-height-code, 1.5);
        color: var(--vscode-editor-foreground);
        white-space: pre-wrap;
        word-break: break-all;
    }
}

// Typing cursor
.cursor {
    display: inline-block;
    animation: blink 1s step-end infinite;
    color: var(--vscode-editorCursor-foreground);
}

@keyframes blink {
    50% { opacity: 0; }
}

// Legacy class support
.markdown-content {
    @extend .vc-markdown;
}

.code-block-container {
    @extend .vc-code-block;
}

.copy-btn {
    @extend .code-action-btn;
}

// Override old class names
.vc-markdown-code-block {
    @extend .vc-code-block;
}
